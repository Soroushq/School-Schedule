# API های برنامه ساز مدرسه

## `/api/send-analytics`

این API برای دریافت و ارسال داده‌های آنالیتیکس کاربران طراحی شده است.

### روش استفاده

**متد HTTP**: POST

**پارامترهای ورودی**:
```json
{
  "to": "ایمیل گیرنده",
  "subject": "موضوع ایمیل",
  "data": {
    // اطلاعات آنالیتیکس
  }
}
```

**نمونه داده آنالیتیکس**:
```json
{
  "sessionId": "شناسه منحصربفرد جلسه",
  "uniqueId": "شناسه منحصربفرد کاربر",
  "userAgent": "اطلاعات مرورگر کاربر",
  "deviceType": "نوع دستگاه (موبایل، تبلت، کامپیوتر)",
  "os": "سیستم عامل",
  "browser": "نوع مرورگر",
  "screenWidth": "عرض صفحه نمایش",
  "screenHeight": "ارتفاع صفحه نمایش",
  "language": "زبان مرورگر",
  "timeZone": "منطقه زمانی",
  "dateTime": "زمان رویداد",
  "eventType": "نوع رویداد (page_view یا custom_event)",
  "pageName": "نام صفحه بازدید شده",
  "currentPath": "مسیر URL فعلی"
}
```

### پاسخ موفق
```json
{
  "success": true,
  "messageId": "شناسه پیام ایمیل ارسال شده"
}
```

### پاسخ خطا
```json
{
  "error": "پیام خطا",
  "details": "جزئیات خطا (در صورت وجود)"
}
```

## نکات پیاده‌سازی

1. برای استفاده در محیط تولید، لازم است متغیرهای محیطی زیر تنظیم شوند:

```
EMAIL_USER=your-email@example.com
EMAIL_PASSWORD=your-app-password
```

2. برای امنیت بیشتر، توصیه می‌شود از سرویس‌های ارسال ایمیل مانند SendGrid یا Mailgun استفاده شود.

3. در نسخه فعلی، داده‌های آنالیتیکس به آدرس `soroush.qe.78@gmail.com` ارسال می‌شوند. 